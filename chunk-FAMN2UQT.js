import{a as K,b as J,c as Q,e as X,f as Y,g as Z,h as tt,k as ot}from"./chunk-A6MNGQ5M.js";import{k as q,r as et}from"./chunk-JQBJYS3N.js";import{$ as D,Aa as o,Ba as n,Ca as x,Da as k,Ea as G,Ga as S,H as A,Ia as M,Ja as f,L as I,Mb as z,O as R,Rb as W,S as u,Sb as nt,T as C,Ta as F,Xa as l,Ya as B,_a as U,bb as H,c as L,eb as _,ia as T,ib as $,ja as r,jb as j,ma as w,na as h,ra as O,tb as N,ub as V,xb as y,za as a}from"./chunk-6FH35LUJ.js";import{a as d,b}from"./chunk-QEZ3K4DX.js";function st(i,e){if(i&1){let t=S();o(0,"div")(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title",3),l(4),n()(),x(5,"img",4),o(6,"mat-card-content")(7,"p"),l(8),n()(),o(9,"mat-card-footer",5)(10,"mat-card-content",6)(11,"p"),l(12),n()(),o(13,"mat-card-actions",7)(14,"button",8),l(15,"LIKE"),n(),o(16,"button",8),l(17,"SHARE"),n(),o(18,"button",9),M("click",function(){let m=u(t).$implicit,v=f();return C(v.onOpenBlog(m.id))}),l(19," Details anzeigen "),n()()()()()}if(i&2){let t=e.$implicit;r(4),B(t.title),r(),a("src",U("https://picsum.photos/seed/"+t.id+"/348/300"),T),r(3),B(t.contentPreview),r(4),B(t.author)}}var g=class g{constructor(){this.blogs=j.required();this.openBlog=$()}onOpenBlog(e){this.openBlog.emit(e)}};g.\u0275fac=function(t){return new(t||g)},g.\u0275cmp=h({type:g,selectors:[["app-home"]],inputs:{blogs:[1,"blogs"]},outputs:{openBlog:"openBlog"},decls:2,vars:1,consts:[[1,"blog-container"],[4,"ngFor","ngForOf"],[1,"blog-card"],[1,"card-title"],["height","300","mat-card-image","","alt","Random Photo",1,"blog-image",3,"src"],[1,"blog-footer"],[1,"blog-author"],["align","end"],["mat-button",""],["mat-raised-button","","color","primary",3,"click"]],template:function(t,p){t&1&&(o(0,"div",0),O(1,st,20,5,"div",1),n()),t&2&&(r(),a("ngForOf",p.blogs()))},dependencies:[y,N,ot,K,X,Q,Z,Y,tt,J,et,W],styles:["[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]{margin-right:auto;margin-left:auto;display:flex;flex-flow:row wrap;justify-content:flex-start;background:#fafbfc;border-radius:18px;box-shadow:0 6px 24px #00000012;padding:32px 0}[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]   .blog-card[_ngcontent-%COMP%]{margin:.625rem;width:400px;border-radius:14px;box-shadow:0 4px 16px #0000001a;border:1.5px solid #e0e0e0;background:#fff}[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]   .blog-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{min-height:4rem;font-size:22px;font-weight:600;color:#222}[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]   .blog-card[_ngcontent-%COMP%]   .blog-image[_ngcontent-%COMP%]{border-radius:.8rem;margin:.8rem}[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]   .blog-card[_ngcontent-%COMP%]   .blog-footer[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]   .blog-card[_ngcontent-%COMP%]   .blog-footer[_ngcontent-%COMP%]   .blog-author[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]   .blog-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:12px;border:2px solid #1976d2;border-radius:6px;background:#fff;color:#1976d2;transition:background .2s,color .2s;box-shadow:none;font-size:15px;padding:8px 16px}[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]   .blog-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#e3f0fd;color:#0d47a1}@media screen and (min-width: 450px){[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]{width:400px}}@media screen and (min-width: 841px){[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]{width:840px}}@media screen and (min-width: 1261px){[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]{width:1260px}}@media screen and (min-width: 1681px){[_nghost-%COMP%]   .blog-container[_ngcontent-%COMP%]{width:1680px}}"],changeDetection:0});var E=g;var s=class s{constructor(e){this.blogService=e;this.initialState={blogs:[],loading:!1,error:null,creating:!1};this.action$=new L;this.destroy$=new L;this.state=D(this.initialState);this.blogs=_(()=>this.state().blogs);this.loading=_(()=>this.state().loading);this.error=_(()=>this.state().error);this.creating=_(()=>this.state().creating);this.action$.pipe(A(this.destroy$)).subscribe(t=>this.reduce(t))}dispatch(e){this.action$.next(e)}loadBlogs(){this.dispatch({type:"LOAD_BLOGS"}),this.blogService.getBlogs().subscribe({next:e=>this.dispatch({type:"LOAD_BLOGS_SUCCESS",blogs:e}),error:e=>this.dispatch({type:"LOAD_BLOGS_FAILURE",error:String(e?.message||e)})})}createBlog(e){this.dispatch({type:"CREATE_BLOG",blog:e}),this.blogService.createBlog(e).subscribe({next:t=>this.dispatch({type:"CREATE_BLOG_SUCCESS",blog:t}),error:t=>this.dispatch({type:"CREATE_BLOG_FAILURE",error:String(t?.message||t)})})}reduce(e){let t=this.state();switch(e.type){case"LOAD_BLOGS":{this.state.set(b(d({},t),{loading:!0,error:null}));break}case"LOAD_BLOGS_SUCCESS":{this.state.set({blogs:e.blogs,loading:!1,error:null,creating:!1});break}case"LOAD_BLOGS_FAILURE":{this.state.set(b(d({},t),{loading:!1,error:e.error}));break}case"CREATE_BLOG":{this.state.set(b(d({},t),{creating:!0,error:null}));break}case"CREATE_BLOG_SUCCESS":{this.state.set({blogs:[...t.blogs,e.blog],loading:!1,creating:!1,error:null});break}case"CREATE_BLOG_FAILURE":{this.state.set(b(d({},t),{creating:!1,error:e.error}));break}}}destroy(){this.destroy$.next(),this.destroy$.complete()}};s.\u0275fac=function(t){return new(t||s)(R(nt))},s.\u0275prov=I({token:s,factory:s.\u0275fac,providedIn:"root"});var P=s;function ct(i,e){if(i&1){let t=S();k(0),o(1,"app-home",2),M("openBlog",function(m){u(t);let v=f();return C(v.onOpenBlog(m))}),n(),G()}if(i&2){let t=f();r(),a("blogs",t.blogs())}}function pt(i,e){i&1&&x(0,"app-spinner",3),i&2&&a("diameter",64)("strokeWidth",5)("fullscreen",!0)}var c=class c{constructor(e,t){this.blogStore=e;this.router=t;this.blogs=this.blogStore.blogs;this.loading=this.blogStore.loading}ngOnInit(){this.blogStore.loadBlogs()}onOpenBlog(e){this.router.navigate(["/blog",e])}};c.\u0275fac=function(t){return new(t||c)(w(P),w(z))},c.\u0275cmp=h({type:c,selectors:[["app-home-page"]],decls:3,vars:2,consts:[["loadingTpl",""],[4,"ngIf","ngIfElse"],[3,"openBlog","blogs"],[3,"diameter","strokeWidth","fullscreen"]],template:function(t,p){if(t&1&&O(0,ct,2,1,"ng-container",1)(1,pt,1,3,"ng-template",null,0,H),t&2){let m=F(2);a("ngIf",!p.loading())("ngIfElse",m)}},dependencies:[y,V,E,q],encapsulation:2,changeDetection:0});var rt=c;export{rt as HomePageComponent};
